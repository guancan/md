# 改造需求及技术方案

## 需求

实现一个导出为图片的功能，要求：

1. 在现有「复制」按钮的左侧，增加「导出图片」的选项
2. 点击「导出图片」后 ，我希望以弹窗的形式展示前面的 html 内联样式的渲染结果，并在弹窗上展示下载图片按钮（点击后触发.png 格式的图片下载）
3. 不要重写 html 渲染过程，尽量利用当前的渲染过程和结果（因为这里的兼容和适配有大量工作，很麻烦，我们没必要重新搞）
4. 组件样式上，我建议复用 @ui 里的结构和逻辑，有必要的情况下再新建工程文件

## 技术方案概述

基于现有代码，我们可以将导出图片功能分为以下几个部分：

- UI 交互层:
  - 在现有复制按钮的左侧添加"导出图片"选项
  - 使用 AlertDialog 组件展示预览和下载按钮
  - 复用 @ui 中的按钮和对话框组件
- 图片导出逻辑层:
  - 复用现有的 HTML 渲染逻辑
  - 使用 html2canvas 将渲染结果转换为图片
  - 处理图片下载功能

## 工程结构设计

src/
├── components/
│   ├── ExportImageDialog/
│   │   ├── index.vue              # 导出图片的弹窗组件
│   │   └── index.ts               # 组件导出
│   └── CodemirrorEditor/
│       └── EditorHeader/          # 现有的编辑器头部组件
│           └── index.vue          # 需要修改，添加导出图片选项
├── utils/
│   ├── exportImage.ts             # 图片导出相关的工具函数
│   └── index.ts                   # 工具函数导出
